# WireGuard Web Manager - Windows Edition

Простое веб-приложение для управления серверами и клиентами WireGuard, оптимизированное для Windows.

## Особенности Windows оптимизации

- ✅ Полностью локальные CSS стили (без зависимости от CDN)
- ✅ Batch файлы для удобного запуска
- ✅ Поддержка Windows сервисов
- ✅ Кроссплатформенные пути файлов
- ✅ Оптимизированные для Windows настройки

## Системные требования

- **Операционная система**: Windows 10/11 или Windows Server 2016+
- **Go**: версия 1.21 или выше ([скачать](https://golang.org/dl/))
- **Права администратора**: для установки как сервис (опционально)

## Быстрый старт

### 1. Установка Go

1. Скачайте Go с [официального сайта](https://golang.org/dl/)
2. Запустите установщик и следуйте инструкциям
3. Перезапустите командную строку
4. Проверьте установку:
   ```cmd
   go version
   ```

### 2. Запуск приложения

#### Вариант A: Автоматическая сборка и запуск
```cmd
build-and-run.bat
```

#### Вариант B: Только запуск (если уже собран)
```cmd
start.bat
```

### 3. Доступ к веб-интерфейсу

Откройте браузер и перейдите по адресу: **http://localhost:8080**

## Подробные инструкции

### Ручная сборка (опционально)

Если вы хотите собрать приложение вручную:

```cmd
# Скачивание зависимостей
go mod download

# Сборка для Windows
go build -o wireguard-web-manager.exe

# Запуск
wireguard-web-manager.exe
```

### Установка как Windows сервис

Для запуска приложения в фоновом режиме как Windows сервис:

```cmd
# Установка сервиса
service.bat install

# Запуск сервиса
service.bat start

# Остановка сервиса
service.bat stop

# Удаление сервиса
service.bat uninstall
```

**Примечания:**
- Требуются права администратора
- Сервис будет запускаться автоматически при загрузке системы
- Логи сервиса можно найти в Event Viewer (Просмотр событий Windows)

### Структура проекта

```
wireguard-web-manager/
├── main.go                 # Основной файл приложения
├── go.mod                  # Зависимости Go
├── css/
│   └── style.css          # Кастомные стили для Windows
├── static/
│   └── app.js             # JavaScript для веб-интерфейса
├── templates/
│   ├── base.html          # Базовый шаблон
│   ├── index.html         # Главная страница
│   └── dashboard.html     # Панель управления
├── uploads/               # Папка для загрузок
├── build-and-run.bat      # Сборка и запуск
├── start.bat             # Только запуск
├── service.bat           # Управление сервисом
└── README_WINDOWS.md     # Этот файл
```

## Использование приложения

### 1. Создание сервера

1. Перейдите в панель управления
2. Заполните форму конфигурации сервера:
   - **Название сервера**: любое понятное имя
   - **Порт**: обычно 51820 (стандартный для WireGuard)
   - **Сеть**: например, 10.0.0.0/24
   - **DNS**: например, 8.8.8.8
   - **Endpoint**: ваш внешний IP и порт
   - **AllowedIPs**: например, 0.0.0.0/0 (весь трафик)

3. Нажмите "Сохранить сервер"

### 2. Добавление клиентов

1. В панели управления найдите секцию "Добавить клиента"
2. Заполните:
   - **Имя клиента**: понятное имя
   - **Email**: опционально
3. Нажмите "Добавить клиента"

### 3. Управление клиентами

В таблице клиентов доступны действия:
- **Скачать конфиг**: загрузка .conf файла для клиента
- **Включить/Отключить**: управление статусом клиента
- **Удалить**: удаление клиента

### 4. Мониторинг статистики

В верхней части панели управления отображается статистика:
- Всего клиентов
- Активных клиентов
- Отключенных клиентов
- Скачавших конфигурацию

## Решение проблем

### Приложение не запускается

1. **Проверьте Go**: `go version`
2. **Проверьте порт 8080**: не занят ли другим приложением
3. **Проверьте логи**: запустите из командной строки для просмотра ошибок

### Ошибка при установке сервиса

1. Запустите командную строку **от имени администратора**
2. Проверьте, что файл wireguard-web-manager.exe существует
3. Убедитесь, что сервис с таким именем еще не установлен

### Проблемы с веб-интерфейсом

1. Очистите кеш браузера
2. Проверьте консоль браузера (F12) на наличие ошибок
3. Убедитесь, что CSS файл загружается: http://localhost:8080/css/style.css

### Порт 8080 занят

Измените порт в файле main.go:
```go
r.Run(":8080")  // Измените на другой порт, например, ":8081"
```

## Безопасность

### Рекомендации для продакшена

1. **Измените порт по умолчанию** с 8080 на нестандартный
2. **Настройте firewall** для ограничения доступа
3. **Используйте HTTPS** (требует дополнительной настройки)
4. **Ограничьте доступ** только необходимым пользователям
5. **Регулярно обновляйте** зависимости Go

### Настройка Windows Firewall

```cmd
# Разрешить входящие подключения на порт 8080
netsh advfirewall firewall add rule name="WireGuard Web Manager" dir=in action=allow protocol=TCP localport=8080
```

## Разработка

### Структура кода

- **main.go**: точка входа, настройка маршрутов
- **handlers/handlers.go**: обработчики HTTP запросов
- **models/models.go**: модели данных и хранилище
- **templates/**: HTML шаблоны
- **static/**: JavaScript файлы
- **css/**: стили (локальные, без CDN)

### Добавление новых функций

1. Добавьте новый обработчик в handlers/handlers.go
2. Добавьте маршрут в main.go
3. Обновите HTML шаблоны при необходимости
4. Добавьте JavaScript логику в static/app.js

### Сборка для других платформ

```cmd
# Linux
GOOS=linux GOARCH=amd64 go build -o wireguard-web-manager-linux

# macOS
GOOS=darwin GOARCH=amd64 go build -o wireguard-web-manager-macos
```

## Лицензия

Этот проект является примером и предоставляется "как есть" для образовательных целей.

## Поддержка

Для получения помощи:
1. Проверьте раздел "Решение проблем"
2. Изучите логи приложения
3. Создайте issue в репозитории проекта

---

**Примечание**: Данное приложение является прототипом и не предназначено для использования в производственной среде без дополнительной настройки безопасности.